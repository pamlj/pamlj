---
name: pamlttest
title: T-Test
menuGroup: Power
version: '0.2.0'
jas: '1.2'
export: true
completeWhenFilled: false
description:
    main: |
           Something here

options:

    - name: aim
      title: Calculate 
      type:  List
      default: n
      options:
        - name:  n
          title: N
        - name: power
          title: Power
        - name: es
          title: Effect Size
      description:
            R: |
                The aim of the analysis: `n` for required N, `power` for estimated power and `es` for minimal detectable effect size
            ui: |
                The aim of the analysis: `N` for required N, `Power` for estimated power and `Effect Size` for minimal detectable effect size
      
    - name: mode
      title: "T-Test type"
      type: List
      options:
            - name: ttestind
              title: Independent samples
            - name: ttestpaired
              title: Paired samples
            - name: ttestone
              title: One sample
      default: ttestind

### this is for mode ttestind       
    - name: ttestind_es
      title: "Expected Cohen's d (&delta;)"
      type:  Number
      default: .5
      description:
            R: |
                Expected Cohe's d

    - name: ttestind_n
      title: "N of group 1"
      type:  Number
      default: 20
      description:
            R: |
                Sample size per group

    - name: ttestind_nratio
      title: "Relative size of groups"
      type:  Number
      default: 1
      description:
            R: |
                Relative size of the two groups. 1 means group of equal size, `ratio`>1 means that one group is `ratio` times larger than the other.

#### this is for mode ttestpaired

    - name: ttestpaired_es
      title: "Expected Cohen' d (dz)"
      type:  Number
      default: .5
      description:
            R: |
                Expected Cohe's d_z, defined as the mean difference divided by the standard deviation of the  difference score

    - name: ttestpaired_n
      title: "N"
      type:  Number
      default: 20
      description:
            R: |
                Expected sample size (number of paires)

#### this is for mode ttestone

    - name: ttestone_es
      title: "Expected Cohen'a d (&delta;)"
      type:  Number
      default: .5
      description:
            R: |
                Expected Cohe's d

    - name: ttestone_n
      title: "N"
      type:  Number
      default: 20
      description:
            R: |
                Expected sample size

## equivalence test

    - name: is_equi
      title: "Perform equivalence testing"
      type:  Bool
      default: false
      description:
            R: |
                When `TRUE`, perform an equivalence test to show that a true effect is small enough to be considered practically negligible
            ui: |
                Perform an equivalence test to show that a true effect is small enough to be considered practically negligible

            
    - name: equi_limit
      title: "Equivalence limit"
      type:  Number
      default: 0.1


### this is in general
    - name: power
      title: Minimal desired power 
      type:  Number
      default: .90
      description:
            R: |
                Minimal desired power (1-Beta)

    - name: sig.level
      title: Alpha (Type I rate)  
      type:  Number
      default: .05
      description:

            R: |
                Critical alpha (significance level to be used in the analysis)

    - name: alternative
      title: Tails  
      type:  List
      default: two.sided
      options:
        - name:  two.sided
          title: Two-tailed
        - name:  greater
          title: One-tailed
      description:

            R: |
                Wheather the test is two-tailed (`two.sided`) or one-tailed (`greater`). 
          
          
    - name: plot_contour
      title: Power contour plot
      type: Bool
      default: false

    - name: plot_escurve
      title: Power curve by effect size
      type: Bool
      default: false
      
    - name: plot_ncurve
      title: Power curve by N
      type: Bool
      default: false

    - name: plot_log
      title: Log Scale (when needed)
      type: Bool
      default: true

    - name: plot_palette
      title: Colors
      type: List
      default: viridis
      options:
             - name:  viridis
               title: Viridis
             - name:  rocket
               title: Rocket
             - name:  mako
               title: Mako
             - name:  cividis
               title: Cividis
             - name:  plasma
               title: Plasma
             - name:  turbo
               title: Turbo
             - name:  husky
               title: Husky (grey)

### custom plots 
    

    - name: plot_x
      type: List
      title: "X-axis values"
      default: none
      options:
        - name: none
          title: "----"
        - name: n
          title: N
        - name: power
          title: Power
        - name: es
          title: Effect size

    - name: plot_y
      type: List
      title: "Y-axis values"
      default: none
      options:
        - name: none
          title: "-----"
        - name: n
          title: N
        - name: power
          title: Power
        - name: es
          title: Effect size

    - name: plot_custom_labels
      type: Bool
      title: "Show values"
      default: false

    - name: plot_z
      default: none
      type: List
      title: "Parameter"
      options:
        - name: none
          title: "-----"
        - name: n
          title: N
        - name: power
          title: Power
        - name: es
          title: Effect size
        - name: sig.level
          title: "Type I error"



    - name: plot_x_from
      type: Number
      title: "From"
      default: 0
    - name: plot_x_to
      type: Number
      title: "To"
      default: 0


    - name: plot_z_lines
      type: Number
      title: "# of curves"
      default: 0

    - name: plot_z_value
      type: Array
   #   hidden: true
      default: []
      template:
          type: String


    - name: plot_to_table
      type: Bool
      title: "Show table"
      default: false

    - name: explain
      type: Bool
      title: "Explanatory text"
      default: false
      description:
          R: |
             not used in R
          ui: Produces some text to help interpreting the results

    - name: .caller
      type: String
      default: ttest
      hidden: true

    - name: .interface
      type: String
      default: jamovi
      hidden: true


#### effect size conversion
### independent
    - name: ttestind_ttest
      title: "Observed t-test"
      type: String
      default: "-"
      description:
        R: |
            not used in R
        ui: |
            The observed t-test value resulting an empirical study
            
    - name: ttestind_ngroup
      title: "N per group"
      type: Number
      default: 0
      description:
        R: |
            not used in R
        ui: |
            The observed t-test sample size per group

    - name: ttestind_d
      title: "Cohen's d"
      type: Number
      default: 0
      description:
        R: |
            not used in R
        ui: |
            The resulting Cohen's d corresponding to the observed t-test and N per group

    - name: ttestind_useit
      title: Use it
      type: Action
      description:
          R: |
            not used in R
          ui: |
             Copy the Cohen's d corresponding to the observed t-test to the effect size field to be used in the power analysis


   ### dependent
    - name: ttestpaired_ttest
      title: "Observed t-test"
      type: String
      default: "-"
      description:
        R: |
            not used in R
        ui: |
           The observed t-test

    - name: ttestpaired_obsn
      title: "N"
      type: Number
      default: 0
      description:
        R: |
            not used in R
        ui: |
           The observed t-test sample size (number of pairs)

    - name: ttestpaired_d
      title: "Cohen's dz"
      type: Number
      default: 0
      description:
        R: |
            not used in R
        ui: |
           The resulting d_z

    - name: ttestpaired_useit
      title: Use it
      type: Action
      description:
        R: |
            not used in R
        ui: |
             Copy the Cohen's d_z to the effect size field to be used in the power analysis


    - name: ttestpaired_dind
      title: "Cohen's d (between)"
      type: String
      default: "-"
      description:
        R: |
            not used in R
        ui: |
            Cohen's d uncorrected for pairs correlation

    - name: ttestpaired_r
      title: "Correlation"
      type: Number
      default: 0
      min: -1
      max: 1
      description:
        R: |
            not used in R
        ui: |
            Correlation between repeated measures
    
    - name: ttestpaired_dz
      title: "Cohen's dz"
      type: Number
      default: 0
      description:
        R: |
            not used in R
        ui: |
            Resulting Cohen's d_z

    - name: ttestpaired_d_useit
      title: Use it
      type: Action
      description:
        R: |
            not used in R
        ui: |
             Copy the Cohen's d_z to the effect size field to be used in the power analysis

### one sample

    - name: ttestone_ttest
      title: "Observed t-test"
      type: String
      default: "-"
      description:
        R: |
            not used in R
        ui: |
             Observed t-test value

    - name: ttestone_obsn
      title: "N"
      type: Number
      default: 0
      description:
        R: |
            not used in R
        ui: |
             Observed t-test sample size

    - name: ttestone_d
      title: "Cohen's d"
      type: Number
      default: 0
      description:
        R: |
            not used in R
        ui: |
             Resulting Cohen's d

    - name: ttestone_useit
      title: Use it
      type: Action
      description:
        R: |
            not used in R
        ui: |
             Copy the resulting d as effect size indice in the power analysis


...

